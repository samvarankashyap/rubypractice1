<!DOCTYPE html>
<html>
<head>
  <title>ApplicationSkr</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
  <script src="https://code.jquery.com/jquery-2.1.3.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
  <script>
  $(document).ready(function(){
    $("#personDetails").hide();
    $("#personDetails").empty();
    var initialHeader = "<tr><td>id</td><td>first_name</td><td>last_name</td><td>dob</td><td>email</td><td>location</td><td>about_me</td></tr>";
    $("#getDetails").click(function(){
        $.get("/api/persondetails", function(data, status){
            $("#personDetails").empty();
            $("#personDetails").html(initialHeader);
            console.log("Data: " + data + "\nStatus: " + status);
            for (var item in data){
                 console.log(data[item]);
                 $('#personDetails tr:last').after('<tr><td>'+data[item].id+'</td><td>'+data[item].first_name+'</td><td>'+data[item].last_name+'</td><td>'+data[item].dob+'</td><td>'+data[item].email+'</td><td>'+data[item].location+'</td><td>'+data[item].about_me+'</td></tr>');
               }
            
             $("#personDetails").show();
        });
    
    });
});

  </script>
</head>
<body>

<%= yield %>

<button id="getDetails" class='btn btn-default'>Get User Details</button>

  <iframe
    width="600"
    height="450"
    frameborder="0" style="border:0"
    src="https://www.google.com/maps/embed/v1/view?key=AIzaSyDnQFRH5gn9bYeUFwlyaIEXGs6zQbCLbEU&center=-33.8569,151.2152&zoom=18&maptype=satellite">
  </iframe>


</body>
</html>
